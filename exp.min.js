LZY=function(){var a={isArray:function(b){return Array.isArray(b)},isObject:function(b){return"object"==typeof b},getKeys:function(b){var a=[],e;for(e in b)b.hasOwnProperty(e)&&a.push(e);return a},FakeMultiArg:function(){},argToIterator:function(b){if(a.LazyIterator.prototype.isPrototypeOf(b))return b;if(a.isArray(b))return new a.ArrayIterator(b);if(a.isObject(b))return new a.ObjectIterator(b);throw Error("Ivalid argument type!");},LazyIterator:function(){}};a.LazyIterator.prototype.next=function(){throw Error("Realization of next() is undefined.");
};a.LazyIterator.prototype.hasNext=function(){throw Error("Realization of hasNext() is undefined.");};a.LazyIterator.prototype.reset=function(){throw Error("Realisation of reset() is undefined.");};a.ArrayIterator=function(b){if(!a.isArray(b))throw Error("Argument isn't Array.");var c=0;this.hasNext=function(){return c<b.length};this.next=function(){if(this.hasNext())return b[c++]};this.reset=function(){c=0};this.type=1};a.ArrayIterator.prototype=a.LazyIterator.prototype;a.ObjectIterator=function(b){var c=
new a.ArrayIterator(a.getKeys(b));this.next=function(){if(c.hasNext()){var a=c.next();return[a,b[a]]}};this.hasNext=c.hasNext;this.reset=c.reset;this.type=2};a.ObjectIterator.prototype=a.LazyIterator.prototype;a.MapIterator=function(b,a){1==b.type?this.next=function(){if(b.hasNext())return a(b.next())}:2==b.type&&(this.next=function(){if(b.hasNext())return a.apply(this,b.next())});this.hasNext=b.hasNext;this.reset=b.reset;this.type=b.type};a.MapIterator.prototype=a.LazyIterator.prototype;a.FilterIterator=
function(b,a){var e=void 0,d=!1,f=void 0;1==b.type?f=a:2==b.type&&(f=function(b){return a.apply(this,b)});this.hasNext=function(){if(d)return!0;for(;b.hasNext();){var a=b.next();if(f(a))return e=a,d=!0}return!1};this.next=function(){if(this.hasNext())return d=!1,e};this.reset=b.reset;this.type=b.type};a.FilterIterator.prototype=a.LazyIterator.prototype;a.WhileIterator=function(b,a){var e=!1,d=void 0,f=!1,g=void 0;1==b.type?g=a:2==b.type&&(g=function(b){return a.apply(this,b)});this.hasNext=function(){if(e)return!1;
if(b.hasNext())return d=b.next(),g(d)?f=!0:f=!1;e=!0};this.next=function(){if(f||this.hasNext())return f=!1,d};this.reset=b.reset;this.type=b.type};a.WhileIterator.prototype=a.LazyIterator.prototype;a.ZipIterator=function(b,a){if("number"!=typeof a||1>a)throw Error("ZipIterator: Invalid zip number");this.next=function(){for(var e=Array(a),d=0;d<a;++d)b.hasNext()?e[d]=b.next():e[d]=void 0;return e};this.hasNext=b.hasNext;this.reset=b.reset;this.type=1};a.ZipIterator.prototype=a.LazyIterator.prototype;
a.MultiZipIterator=function(){var b=arguments;if(1>arguments.length)throw Error("Too few arguments passed to MultiZipiterator.");1==arguments.length&&(b=[a.argToIterator(arguments[0])]);if(1<arguments.length&&a.FakeMultiArg.prototype.isPrototypeOf(arguments[0]))for(var b=[],c=0;c<arguments[1].length;++c)b.push(a.argToIterator(arguments[1][c]));else for(b=[],c=0;c<arguments.length;++c)b.push(a.argToIterator(arguments[c]));var e=void 0,d=!0;this.hasNext=function(){if(!d)return!0;for(var a=[],c=0;c<
b.length;++c)if(b[c].hasNext())a.push(b[c].next());else return!1;e=a;d=!1;return!0};this.next=function(){if(this.hasNext())return d=!0,e};this.reset=function(){for(var a=0;a<b.length;++a)b[a].reset();d=!0};this.type=1};a.MultiZipIterator.prototype=a.LazyIterator.prototype;a.ChainIterator=function(b,c){var e=[],d=[],f=void 0,g=!0,n=function(){var b=e[e.length-1],l=d[d.length-1],k=b[l++],m=function(){l>=b.length?(e.pop(),d.pop(),0<e.length&&d[d.length-1]++):d[d.length-1]=l};if(a.isArray(k)){if(e.length>=
c)return f=k,g=!1,m(),!0;e.push(k);d.push(0);return!1}f=k;g=!1;m();return!0};this.hasNext=function(){for(;0<e.length||b.hasNext();)if(0<e.length){var h=n();if(h)return h}else if(b.hasNext())if(h=b.next(),a.isArray(h)){if(e.length>=c)return f=h,g=!1,!0;e.push(h);d.push(0)}else return f=h,g=!1,!0;return!1};this.next=function(){if(!g||this.hasNext())return g=!0,f};this.reset=function(){e=[];d=[];f=void 0;g=!0;b.reset()};this.type=1};a.ChainIterator.prototype=a.LazyIterator.prototype;a.MultiChainIterator=
function(){if(1>arguments.length)throw Error("Too few arguments passed to MailtiChainIterator.");var b=arguments;2==arguments.length&&a.FakeMultiArg.prototype.isPrototypeOf(arguments[0])&&(b=arguments[1]);if(1==b.length)return a.argToIterator(b[0]);var c=[],e;for(e in b)c.push(a.argToIterator(b[e]));var d=0;this.hasNext=function(){for(;d<c.length&&!c[d].hasNext();)d++;return d>=c.length?!1:!0};this.next=function(){if(this.hasNext())return c[d].next()};this.reset=function(){for(var a in c)c[a].reset();
d=0};this.type=1};a.MultiChainIterator.prototype=a.LazyIterator.prototype;a.GeneratorIterator=function(a,c){var e=a;this.hasNext=function(){return!0};this.next=function(){return e=c(e)};this.reset=function(){e=a};this.type=1};a.GeneratorIterator.prototype=a.LazyIterator.prototype;a.gen=function(b,c){return new a.GeneratorIterator(b,c)};a.Fold=function(a,c,e){var d=void 0;for(1==a.type?d=c:2==a.type&&(d=function(a,b){return c(a,b[0],b[1])});a.hasNext();)e=d(e,a.next());return e};a.BaseIterator=function(){};
a.BaseIterator.prototype=a.LazyIterator.prototype;a.BaseIterator.prototype.where=function(b){this.source=new a.FilterIterator(this.source,b);return this};a.BaseIterator.prototype.map=function(b){this.source=new a.MapIterator(this.source,b);return this};a.BaseIterator.prototype.until=function(b){this.source=new a.WhileIterator(this.source,b);return this};a.BaseIterator.prototype.fold=function(b,c){return a.Fold(this.source,b,c)};a.BaseIterator.prototype.zip=function(b){this.source=new a.ZipIterator(this.source,
b);return this};a.BaseIterator.prototype.force=function(){for(var a=[];this.hasNext();)a.push(this.next());return a};a.BaseIterator.prototype.take=function(a){if(0<a){for(var c=[];this.hasNext()&&0<a--;)c.push(this.next());return c}};a.BaseIterator.prototype.drop=function(a){if(0<a){for(;this.hasNext()&&0<a--;)this.next();return this}};a.BaseIterator.prototype.chain=function(b){this.source=new a.ChainIterator(this.source,b);return this};a.BaseIterator.prototype.next=function(){return this.source.next()};
a.BaseIterator.prototype.hasNext=function(){return this.source.hasNext()};a.BaseIterator.prototype.reset=function(){this.source.reset();return this};a.lazy=function(){this.source=new a.MultiChainIterator(new a.FakeMultiArg,arguments)};a.lazy.prototype=a.BaseIterator.prototype;a.zip=function(){this.source=new a.MultiZipIterator(new a.FakeMultiArg,arguments)};a.zip.prototype=a.BaseIterator.prototype;return a}();
